
# æ‰©å±•çŸ¥è¯†

## ä¹±æ•°å‡æ–‡

**lorem** è¡¨ç¤ºã€Œä¹±æ•°å‡æ–‡ã€ã€‚ä¹±æ•°å‡æ–‡æ˜¯ä¸€ä¸ªå°åˆ·å­¦çš„æœ¯è¯­ï¼Œæˆ‘ä»¬è¦å°åˆ·ä¸€äº›ä¹¦ç±ã€æŠ¥åˆŠä¹‹ç±»çš„ï¼Œéœ€è¦ç¡®å®šå®ƒçš„æ’ç‰ˆã€‚ç¡®å®šæ’ç‰ˆï¼Œæˆ‘ä»¬ä¸ä¼šå»æ‰“ä¸ŠçœŸå®çš„æ–‡å­—ï¼Œæˆ‘ä»¬å°±éšä¾¿æŒ‰ä¸€äº›æ–‡å­—ï¼Œæ¥æµ‹è¯•æ’ç‰ˆæ˜¯æ­£ç¡®ã€‚

>Lorem ipsumï¼Œä¸­æ–‡åˆç§°ã€Œä¹±æ•°å‡æ–‡ã€ï¼Œ æ˜¯æŒ‡ä¸€ç¯‡å¸¸ç”¨äºã€Œæ’ç‰ˆè®¾è®¡ã€é¢†åŸŸçš„ã€Œæ‹‰ä¸æ–‡ã€æ–‡ç« ã€‚ä¸»è¦çš„ç›®çš„ä¸ºæµ‹è¯•æ–‡ç« æˆ–æ–‡å­—åœ¨ä¸åŒå­—å‹ã€ç‰ˆå‹ä¸‹çœ‹èµ·æ¥çš„æ•ˆæœã€‚é€šå¸¸ç½‘ç«™è¿˜æ²¡å»ºè®¾å¥½æ—¶ä¼šå‡ºç°è¿™æ®µæ–‡å­—ã€‚ï¼ˆç™¾åº¦ç™¾ç§‘ï¼‰


è¾“å…¥ `lorem` å°±ä¼šç”Ÿæˆä¸€æ®µæ–‡å­—ï¼Œ`loremå•è¯ä¸ªæ•°` å°±ä¼šç”Ÿæˆç‰¹å®šå•è¯æ•°çš„æ–‡å­—ï¼Œå½“è¾“å…¥

```javascript
lorem4
```

æŒ‰ä¸‹ Tab é”®åï¼Œå°±ä¼šç”Ÿæˆ

```javascript
Lorem ipsum dolor sit.
```

## CSSå±æ€§

|å±æ€§|æè¿°|
|---|---|
|`text-align`  |è¡¨ç¤ºå¯¹è¢«ä¿®é¥°å…ƒç´ çš„è¡Œç›’å’Œè¡Œå—ç›’å­å…ƒç´ å±…ä¸­|
|`transition`|ç»™å˜æ¢åŠ ä¸Šè¿‡æ¸¡æ•ˆæœï¼Œåªå¯¹æ•°å€¼ç±»å±æ€§æœ‰æ•ˆï¼Œå¦‚ `widthã€heightã€opacityã€color(rgba)` |

# æ¡ˆä¾‹è¯´æ˜

## è®¾ç½®ç½‘ç«™å›¾æ ‡

è®¾ç½®ç½‘ç«™å›¾æ ‡æœ‰ä¸¤ç§æ–¹æ³•ï¼š

1. å°† favicon å›¾æ ‡æ”¾åˆ°ç½‘ç«™æ ¹ç›®å½•ä¸‹ã€‚

![](https://raw.githubusercontent.com/WeiXinao/imageBed/main/img20230107004448.png)

![](https://raw.githubusercontent.com/WeiXinao/imageBed/main/img20230107004530.png)

2. é€šè¿‡ link æ ‡ç­¾è®¾ç½®ã€‚

```javascript
<link rel="shortcut icon" href="./assets/favicon.ico" type="image/x-icon">
```

![](https://raw.githubusercontent.com/WeiXinao/imageBed/main/img20230107005648.png)

## åŸç†

<iframe style="border:none" width="100%" height="700" src="https://whimsical.com/embed/3HS5bhp4riW9UF1CfMeKhT"></iframe>

## ç•Œé¢

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ­Œè¯æ»šåŠ¨</title>
    <link rel="shortcut icon" href="./assets/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="./css/index.css">
</head>
<body>
    <audio controls src="./assets/æµªæ¼«è¡€æ¶².mp3"></audio>
    <div class="container">
        <ul class="lrc-list">
        </ul>
    </div>
    
    <script src="./js/data.js"></script>
    <script src="./js/index.js"></script>
</body>
</html>
```

å…¶ä¸­ï¼Œ

1. 

```javascript
<audio controls src="./assets/æµªæ¼«è¡€æ¶².mp3"></audio>
```

åŠ è½½éŸ³é¢‘ï¼Œ`src="./assets/æµªæ¼«è¡€æ¶².mp3"` è¡¨ç¤ºéŸ³é¢‘ URLï¼›`controls` è¡¨ç¤ºæ˜¾ç¤ºæ§ä»¶ã€‚

2. 

```html
<div class="container">
    <ul class="lrc-list">
    </ul>
</div>
```

æ˜¾ç¤ºæ­Œè¯çš„ç›’å­ï¼Œæ¯ä¸€å¥æ­Œè¯éƒ½æ˜¯ä¸€ä¸ª `li` ï¼Œå› æ­¤ï¼Œåœ¨ container ä¸­ç”¨ä¸€ä¸ªæ— åºåˆ—è¡¨æ¥è£…æ­Œè¯ã€‚

3. 

```html
<link rel="stylesheet" href="./css/index.css">
```

å¼•å…¥ css æ–‡ä»¶ã€‚

4. 

```html
<script src="./js/data.js"></script>
```

å¼•å…¥æ­Œè¯æ•°æ®ï¼Œdata.js ä¸­æ˜¯ä¸€ä¸ªæ­Œè¯å­—ç¬¦ä¸²ï¼Œå…¶ä¸­ï¼Œæ¯å¥æ­Œè¯çš„æ ¼å¼ä¸ºï¼š

```
[00:14.17]ä»ä¸€ä¸ªçœ¼ç¥ä¸€æ¬¡è°ˆå¿ƒ
```

`[]` ä¸ºæ­Œè¯å¯¹åº”çš„æ—¶é—´ï¼Œåé¢æ¥ä¸€å¥æ­Œè¯ã€‚

5. 

```html
<script src="./js/index.js"></script>
```

å¼•å…¥ javacript æ–‡ä»¶ã€‚

## æ ·å¼

ä¸å¤šè¯´äº†ï¼Œçœ‹æ³¨é‡Šã€‚

```css
/*	æ¸…é™¤é»˜è®¤æ ·å¼ */
* { 
    margin: 0;
    padding: 0;
}

/*
  1. è®¾ç½®é¡µé¢é¢œè‰²ä¸ºé»‘è‰²
  2. è®¾ç½®æ²¡æœ‰é«˜äº®çš„æ­Œè¯ä¸ºç°è‰²
  3. è®¾ç½®æ–‡å­—å±…ä¸­ 

  ä»¥ä¸Šä¸‰ä¸ªå±æ€§å‡ç”¨äº† css çš„ç»§æ‰¿ç‰¹æ€§
  
  1. ä¸ºä»€ä¹ˆåˆ—è¡¨ä¸­çš„æ­Œè¯ä¼šè¢«è®¾ç½®ä¸ºç°è‰²ï¼Ÿ
  ç­”ï¼šå› ä¸ºå­å…ƒç´ ä¼šåŸºç¡€çˆ¶å…ƒç´ çš„æ ·å¼
  2. ä¸ºä»€ä¹ˆåˆ—è¡¨ä¸­çš„æ–‡å­—ä¼šå±…ä¸­ï¼Ÿ 
  ç­”ï¼šå› ä¸º li ä¼šç»§æ‰¿ç¥–å…ˆå…ƒç´  body çš„ text-align: center; è¿™ä¸ªå±æ€§ï¼Œè®© li å…ƒç´ ä¸­çš„æ–‡å­—å±…ä¸­ï¼Œ
  è€Œ text-align æ˜¯ä¿®é¥°å—ç›’ï¼Œ ä½¿å…¶ä¸­çš„è¡Œç›’å’Œè¡Œå—ç›’å±…ä¸­ã€‚
*/
body {
    background: #000;
    color: #666;
    text-align: center; 
}

/* 
  1. è®¾ç½®ä¸€ä¸‹éŸ³é¢‘ç©ºé—´çš„å®½åº¦
  2. å°†éŸ³é¢‘ç©ºé—´å±…ä¸­
*/
audio {
    width: 450px;
    margin: 30px 0;
}

/*
   1. è®¾ç½®æ­Œè¯æ˜¾ç¤ºåŒºåŸŸçš„é«˜åº¦
   2. æº¢å‡ºæ­Œè¯æ˜¾ç¤ºåŒºåŸŸçš„æ­Œè¯éšè—
*/
.container {
    height: 420px;
    overflow: hidden;
    /* border: 2px solid #fff; */
}

/*
   1. è®¾ç½®æ­Œè¯ç§»åŠ¨æ—¶çš„è¿‡æ¸¡æ•ˆæœï¼Œåœ¨ 0.6s å†…å®Œæˆå˜æ¢
   2. æ¸…é™¤æ— åºåˆ—è¡¨çš„é»˜è®¤æ ·å¼
*/
.container ul {
    /* border: 2px solid #fff; */
    transition: 0.6s;
    list-style: none;
}

/*
   1. è®¾ç½®æ­Œè¯åˆ—è¡¨æ¯ä¸€ä¸ª list çš„é«˜åº¦ä¸º 30 åƒç´ 
   2. è®¾ç½®è¡Œé«˜ä¸º 30 åƒç´ ï¼Œä¸ list çš„é«˜åº¦ç›¸åŒï¼Œå…¶å®æ˜¯ä¸ºäº†ä½¿æ–‡å­—å±…ä¸­
   3. è®¾ç½®æ­Œè¯é«˜äº®æ—¶çš„è¿‡æ¸¡æ•ˆæœï¼Œåœ¨ 0.6s å†…å®Œæˆå˜æ¢
*/
.container li {
    height: 30px;
    /* border: 2px solid #fff; */
    line-height: 30px;
    /*
        ä¸ºä»€ä¹ˆæŠŠè¿‡æ¸¡æ”¾åˆ°è¿™é‡Œè€Œä¸æ”¾åˆ° .container li.active ä¸­ï¼Ÿ
        å› ä¸ºæ”¾åˆ°è¿™é‡Œï¼Œè¿™ä¸ªé€‰æ‹©å™¨ä¼šä¸€ç§é€‰ä¸­ li å…ƒç´ ï¼Œå› æ­¤ï¼Œåœ¨æ–‡å­—å˜å¤§å’Œå˜å°æ—¶ï¼Œéƒ½ä¼šæœ‰è¿‡æ¸¡ã€‚
        è€Œå°†è¿‡æ¸¡æ”¾åˆ° container li.active ä½†å…ƒç´ ä¸å†æœ‰ class=".active" å±æ€§æ—¶ï¼Œæ–‡å­—ä¼šç¬é—´å˜å°ï¼Œå¤±å»è¿‡æ¸¡æ•ˆæœ
        æ”¾åˆ°æ­¤å¤„ï¼Œæ–‡å­—æ— è®ºå˜å¤§å˜å°ï¼Œéƒ½æœ‰è¿‡æ¸¡æ•ˆæœã€‚ 
    */
    transition: 0.6s;
}

/*
  é«˜äº®æ­Œè¯çš„æ ·å¼
  1. è®¾ç½®æ­Œè¯çš„é¢œè‰²ä¸ºç™½è‰²
  2. ä¸ºå­—æ”¾å¤§ä¸º 1.2 å€
*/
.container li.active {
    color: #fff;
    /* font-size: 2em; */
    transform: scale(1.2);
}
```

## æ•°æ®ä¸äº¤äº’

```javascript
/**
 * è§£ææ­Œè¯å­—ç¬¦ä¸²
 * å¾—åˆ°ä¸€ä¸ªæ­Œè¯å¯¹è±¡çš„æ•°ç»„
 * æ­Œè¯å¯¹è±¡çš„æ ¼å¼ï¼š
 * { time: å¼€å§‹æ—¶é—´, words: æ­Œè¯å†…å®¹ }
 */
function parseLrc() {
    var lines = lrc.split('\n');
    var result = [];
    for (var i = 0; i < lines.length; i++) {
        var str = lines[i];
        var parts = str.split(']');
        var timeStr = parts[0].substring(1); 
        obj = {
            time: parseTimeStr(timeStr),
            words: parts[1]
        }   
        result.push(obj);
    }
    return result;
}

/**
 * å°†ä¸€ä¸ªæ—¶é—´å­—ç¬¦ä¸²è§£æä¸ºæ•°å­—ï¼ˆç§’ï¼‰
 * @param {String} timeStr æ—¶é—´å­—ç¬¦ä¸² 
 * @returns æ—¶é—´æ•°å€¼
 */
function parseTimeStr(timeStr) { 
    var parts = timeStr.split(':');
    /* æ³¨æ„ï¼šè¿™é‡Œçš„parts[1]å‰é¢è¦å¤šåŠ ä¸€ä¸ª "+" å·ï¼Œå³+parts[1]ï¼Œè¡¨ç¤ºå°†å­—ç¬¦ä¸²è½¬åŒ–ä¸ºæ•°å­— */
    return +parts[0] * 60 + +parts[1];
}

var lrcData = parseLrc();

// è·å–éœ€è¦çš„ dom
var doms = {
    audio: document.querySelector('audio'),
    ul: document.querySelector('.container ul'),
    container: document.querySelector('.container'),
};

/**
 * è®¡ç®—å‡ºï¼Œåœ¨å½“å‰æ’­æ”¾å™¨æ’­æ”¾åˆ°ç¬¬å‡ ç§’çš„æƒ…å†µä¸‹
 * lrcDataæ•°ç»„ä¸­ï¼Œåº”è¯¥é«˜äº®æ˜¾ç¤ºçš„æ­Œè¯ä¸‹æ ‡
 * å¦‚æœæ²¡æœ‰ä»»ä½•ä¸€å¥æ­Œè¯éœ€è¦æ˜¾ç¤ºï¼Œåˆ™å¾—åˆ° -1
 * @returns åº”è¯¥é«˜äº®æ˜¾ç¤ºçš„æ­Œè¯ä¸‹æ ‡
 */
function findIndex() {
    // æ’­æ”¾å™¨å½“å‰æ—¶é—´
    var currTime = doms.audio.currentTime;
    for (var i = 0; i < lrcData.length; i++) {
        if (lrcData[i].time > currTime) 
            return i - 1;  
    }  
    // æ‰¾éäº†éƒ½æ²¡æ‰¾åˆ°ï¼Œï¼ˆè¯´æ˜æ’­æ”¾åˆ°æœ€åä¸€å¥ï¼‰
    return lrcData.length - 1;
}

// ç•Œé¢
/**
 * åˆ›å»ºæ­Œè¯å…ƒç´  li
 */
function createLrcElements() {
    var frag = document.createDocumentFragment(); // æ–‡æ¡£ç‰‡æ®µ
    for (var i = 0; i < lrcData.length; i++) {
        var li = document.createElement('li');
        li.textContent = lrcData[i].words;
        frag.appendChild(li); // æ”¹åŠ¨äº† dom æ ‘
    }
    doms.ul.appendChild(frag);
}

createLrcElements();

// å®¹å™¨é«˜åº¦
var containerHeight = doms.container.clientHeight;
// æ¯ä¸ª li çš„é«˜åº¦
var liHeight = doms.ul.children[0].clientHeight;
// æœ€å¤§åç§»é‡
var maxOffset = doms.ul.clientHeight - containerHeight;

/**
 * è®¾ç½® ul å…ƒç´ çš„åç§»é‡
 */
function setOffset() {
    var index = findIndex();
    var offset = liHeight * index + liHeight / 2 - containerHeight / 2;
    if (offset < 0) {
        offset = 0;
    }
    if (offset > maxOffset) {
        offset = maxOffset;
    }
    doms.ul.style.transform = `translateY(-${offset}px)`

    /* å»æ‰ä¹‹å‰çš„ active æ ·å¼ */
    var active = doms.ul.querySelector('.active');
    if (active) {
        active.classList.remove('active')
    }

    var li = doms.ul.children[index];
    if (li) {
        li.classList.add('active');
    }
}

doms.audio.addEventListener('timeupdate', setOffset);
```

### ä»£ç è®¾è®¡åŸåˆ™

ä»æ•°æ®å…¥æ‰‹ï¼Œ æŠŠæ•°æ®å¤„ç†ä¸ºä¾¿äºä»£ç å®ç°çš„å½¢å¼ï¼Œå¦‚å°†å­—ç¬¦ä¸²è½¬åŒ–ä¸ºå¯¹è±¡ã€‚ç„¶åè®¾è®¡å‡½æ•°ï¼ŒåŒ…æ‹¬æ•°æ®å¤„ç†å‡½æ•°ï¼Œé¡µé¢äº¤äº’å‡½æ•°ã€‚æœ€åç›‘å¬äº‹ä»¶ï¼Œå°†æ—¶é—´å’Œå‡½æ•°è”ç³»èµ·æ¥ã€‚

### æ•°æ®å¤„ç†

æˆ‘ä»¬ç°æœ‰çš„æ•°æ®æ˜¯ä¸€ä¸ªæ­Œè¯çš„å­—ç¬¦ä¸²ï¼Œä¸å¤ªå¥½å¤„ç†ï¼Œæˆ‘ä»¬è¦å°†å­—ç¬¦ä¸²è½¬åŒ–ä¸ºå¥½å¤„ç†çš„å½¢å¼ï¼Œå¯¹è±¡ã€‚

ç¬¬ä¸€æ­¥ï¼Œå®ç°ä¸€ä¸ªå°†æ­Œè¯å­—ç¬¦ä¸²è½¬åŒ–ä¸ºå¯¹è±¡æ•°å€¼çš„å‡½æ•°ã€‚

```javascript
/**
 * è§£ææ­Œè¯å­—ç¬¦ä¸²
 * å¾—åˆ°ä¸€ä¸ªæ­Œè¯å¯¹è±¡çš„æ•°ç»„
 * æ­Œè¯å¯¹è±¡çš„æ ¼å¼ï¼š
 * { time: å¼€å§‹æ—¶é—´, words: æ­Œè¯å†…å®¹ }
 */
function parseLrc() {
	/*	å°†å­—ç¬¦ä¸²æŒ‰æ¢è¡Œç¬¦åˆ†å‰²æˆå­—ç¬¦ä¸²æ•°ç»„ã€‚*/
    var lines = lrc.split('\n'); 
    var result = [];
    /* éå†æ•°ç»„ */
    for (var i = 0; i < lines.length; i++) {
        var str = lines[i];
        /* å°†æ¯ä¸€å¥æ­Œè¯åˆ†å‰²æˆæ—¶é—´å’Œå†…å®¹ä¸¤éƒ¨åˆ† */
        var parts = str.split(']');
        /* å»æ‰æ¯ä¸ªæ­Œè¯æ­Œè¯æ—¶é—´å‰çš„ '['ï¼Œåªä¿ç•™æ—¶é—´éƒ¨åˆ† */
        var timeStr = parts[0].substring(1); 
        obj = {
            time: parseTimeStr(timeStr),
            words: parts[1]
        }   
        result.push(obj);
    }
    return result;
}
```

å°†æ—¶é—´å­—ç¬¦ä¸²è½¬åŒ–ä¸ºæ—¶é—´æ•°å€¼çš„å‡½æ•°ç¨ç¨æœ‰ç‚¹å¤æ‚ï¼Œä¸ºäº†ä¿æŒæ¯ä¸ªå‡½æ•°çš„ç®€çŸ­ï¼Œä½¿ä»£ç æ›´åŠ å¯è¯»ï¼Œæˆ‘ä»¬å•ç‹¬å®ç°ä¸€ä¸ªå°†æ—¶é—´å­—ç¬¦ä¸²è½¬åŒ–ä¸ºæ—¶é—´çš„å‡½æ•°ã€‚

```javascript
/**
 * å°†ä¸€ä¸ªæ—¶é—´å­—ç¬¦ä¸²è§£æä¸ºæ•°å­—ï¼ˆç§’ï¼‰
 * @param {String} timeStr æ—¶é—´å­—ç¬¦ä¸² 
 * @returns æ—¶é—´æ•°å€¼
 */
function parseTimeStr(timeStr) { 
    var parts = timeStr.split(':');
    /* æ³¨æ„ï¼šè¿™é‡Œçš„parts[1]å‰é¢è¦å¤šåŠ ä¸€ä¸ª "+" å·ï¼Œå³+parts[1]ï¼Œè¡¨ç¤ºå°†å­—ç¬¦ä¸²è½¬åŒ–ä¸ºæ•°å­— */
    return +parts[0] * 60 + +parts[1];
}
```

è§‚å¯Ÿæ—¶é—´çš„æ ¼å¼ã€‚

```
00:14.17
```

æˆ‘ä»¬å¯ä»¥æŒ‰ : åˆ†å‰²ï¼Œå†’å·å‰é¢ä¸ºåˆ†ï¼Œåé¢ä¸ºç§’ã€‚ç„¶åæŒ‰ç…§ $\text{åˆ†} \times 60 + \text{ç§’} = {æ€»æ—¶é—´}ï¼ˆå•ä½ä¸ºç§’ï¼‰$ è®¡ç®—å‡ºæ­Œè¯å†…å®¹å¯¹åº”çš„æ—¶é—´ã€‚è¿™é‡Œå°±è¦å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å­—ï¼Œå¯ä»¥åœ¨å­—ç¬¦ä¸²å‰é¢åŠ ä¸Šä¸€ä¸ª ã€Œ+ã€å·ï¼Œå› æ­¤

```javascript
return +parts[0] * 60 + +parts[1];
```

`+ +parts[1]` ç¬¬ä¸€ä¸ª ã€Œ+ã€è¡¨ç¤ºè¿›è¡ŒåŠ æ³•è¿ç®—ï¼Œ ç¬¬äºŒä¸ª ã€Œ+ã€è¡¨ç¤ºå°†å­—ç¬¦ä¸²ç±»å‹è½¬åŒ–ä¸ºæ•°å­—ç±»å‹ã€‚

ç¬¬äºŒæ­¥ï¼Œæ‹¿åˆ°é«˜äº®æ˜¾ç¤ºçš„æ­Œè¯çš„ä¸‹æ ‡

```javascript
function findIndex() {
    // æ’­æ”¾å™¨å½“å‰æ—¶é—´
    var currTime = doms.audio.currentTime;
    for (var i = 0; i < lrcData.length; i++) {
        if (lrcData[i].time > currTime) 
            return i - 1;  
    }  
    // æ‰¾éäº†éƒ½æ²¡æ‰¾åˆ°ï¼Œï¼ˆè¯´æ˜æ’­æ”¾åˆ°æœ€åä¸€å¥ï¼‰
    return lrcData.length - 1;
}
```

éå†æ¯ä¸ªå•è¯ï¼Œå½“è¢«éå†çš„æ­Œè¯å¯¹åº”æ—¶é—´å¤§äºå½“å‰æ—¶é—´æ—¶ï¼Œåœæ­¢éå†ï¼Œè¿”å›å‰ä¸€å¥æ­Œè¯çš„ä¸‹æ ‡ï¼›æ­Œæ›²åˆ°æœ€åæ—¶ï¼Œæ‰¾ä¸åˆ°å¤§äºå½“å‰æ—¶é—´çš„æ­Œè¯å¯¹åº”æ—¶é—´æ—¶ï¼Œè¿”å›æœ€åä¸€å¥æ­Œè¯çš„ä¸‹æ ‡ã€‚

ç¬¬ä¸‰æ­¥ï¼Œè®¡ç®—æ­Œè¯åˆ—è¡¨åç§»é‡ï¼Œå·§å¦‡éš¾ä¸ºæ— ç±³ä¹‹ç‚Šï¼Œåœ¨è¿›è¡Œè¿™ä¸€æ­¥ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆè¦å°†æ­Œè¯æ•°æ®æ˜¾ç¤ºåˆ°æ­Œè¯æ˜¾ç¤ºåŒºåŸŸ

```javascript
/**
 * åˆ›å»ºæ­Œè¯å…ƒç´  li
 */
function createLrcElements() {
    var frag = document.createDocumentFragment(); // æ–‡æ¡£ç‰‡æ®µ
    /* éå†æ­Œè¯å¯¹è±¡æ•°ç»„ */
    for (var i = 0; i < lrcData.length; i++) {
	    /* ä¸ºæ¯ä¸€å¥æ­Œè¯åˆ›å»ºä¸€ä¸ª li å…ƒç´  */
        var li = document.createElement('li');
        /* å°† li çš„å†…å®¹æ”¹ä¸ºæ­Œè¯ */
        li.textContent = lrcData[i].words;
	    /* å°† li åŠ å…¥æ–‡æ¡£ç‰‡æ®µ */
        frag.appendChild(li); // æ”¹åŠ¨äº† dom æ ‘
    }
    /* å°†æ–‡æ¡£ç‰‡æ®µåŠ å…¥ dom æ ‘ */
    doms.ul.appendChild(frag);
}
```

> ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ–‡æ¡£ç‰‡æ®µï¼Ÿ 

ç¬¬å››æ­¥ï¼ŒçœŸçš„åˆ°äº†è®¡ç®—åˆ—è¡¨åç§»é‡äº†

```javascript
// å®¹å™¨é«˜åº¦
var containerHeight = doms.container.clientHeight;
// æ¯ä¸ª li çš„é«˜åº¦
var liHeight = doms.ul.children[0].clientHeight;
// æœ€å¤§åç§»é‡
var maxOffset = doms.ul.clientHeight - containerHeight;

/**
 * è®¾ç½® ul å…ƒç´ çš„åç§»é‡
 */
function setOffset() {
    var index = findIndex();
    var offset = liHeight * index + liHeight / 2 - containerHeight / 2;
    if (offset < 0) {
        offset = 0;
    }
    if (offset > maxOffset) {
        offset = maxOffset;
    }
    doms.ul.style.transform = `translateY(-${offset}px)`

    /* å»æ‰ä¹‹å‰çš„ active æ ·å¼ */
    var active = doms.ul.querySelector('.active');
    if (active) {
        active.classList.remove('active')
    }

    var li = doms.ul.children[index];
    if (li) {
        li.classList.add('active');
    }
}
```

è¿™æ®µä»£ç ç»“åˆ[åŸç†](#åŸç†)æ¥çœ‹ï¼Œæ›´å®¹æ˜“ç†è§£ã€‚

å‡½æ•°å·²ç»éƒ½å‡†å¤‡å¥½ï¼Œæœ€åä¸€æ­¥ï¼Œè®¾ç½®äº‹ä»¶ç›‘å¬ï¼Œä¸å‡½æ•°è¿›è¡Œç»‘å®šï¼Œç»“æŸã€‚

```javascript
doms.audio.addEventListener('timeupdate', setOffset);
```

# æ•ˆæœå±•ç¤º

ğŸ‘‰ [æ¼”ç¤ºdemo](https://weixinao.github.io/Web-Study-Source-Code/%E5%AE%9E%E6%88%98-%E6%AD%8C%E8%AF%8D%E6%BB%9A%E5%8A%A8%E6%95%88%E6%9E%9C/)

![](https://raw.githubusercontent.com/WeiXinao/imageBed/main/img2023-01-11-19-06-46.gif)

<iframe style="border:none" width="100%" height="700" src="https://weixinao.github.io/Web-Study-Source-Code/%E5%AE%9E%E6%88%98-%E6%AD%8C%E8%AF%8D%E6%BB%9A%E5%8A%A8%E6%95%88%E6%9E%9C/"></iframe>

